
@{
    ViewData["Title"] = ViewData["PageTitle"];
}


<script type="text/javascript">
   var root = '@Url.Action("CreateEdit", "ExploitationRoads")';

    function EditingStarted(e) {
        e.cancel = true;
        window.location.href = root + "/" + e.key;
    }

    function NewRowAdding(e) {
        window.location.href = root;
        e.component.cancelAll();
    }

</script>


<div class="row">

    <div class="col-md-12 col-lg-12 col-sm-12">
        <div class="card">
            <h5 class="card-header bg-primary text-white mt-0">@ViewData["PageTitle"]</h5>
            <div class="card-body">

                @(

    Html.DevExtreme().DataGrid<Obj12ExploitationRoad>
    ().StateStoring(s => s
                .Enabled(true)
                .Type(StateStoringType.LocalStorage)
                .StorageKey("storageExploitationRoad"))
    .Columns(cols =>
    {
        cols.AddFor(m => m.Name).DataType(GridColumnDataType.String).Caption("Ad");
        cols.AddFor(m => m.FkIdAdminUnit).LoadWithAdminUnit().Caption("Yerləşdiyi ərazi");
        cols.AddFor(m => m.Length).Caption("Yolun uzunluğu(km)");
        cols.AddFor(m => m.RoadWidth).Caption("Yolun eni(m)");
        cols.AddFor(m => m.FkIdOwnershipType).LoadWithOwnershipType().Caption("Mülkiyyət növü");
        cols.AddFor(m => m.RoadCover).Caption("Örtük").Lookup(x => x.DataSource(new object[] {
                                                                                                    new { text = "Örtüklü", value = 1 },
                                                                                                    new { text = "Örtüksüz", value = 2 }
                                                                                                           }).DisplayExpr("text").ValueExpr("value").AllowClearing(true));
        cols.AddFor(m => m.FkIdOwner).LoadWithOwner().Caption("Mülkiyyətçisi");
        cols.AddFor(m => m.ExploitationDate).Caption("İstismara verildiyi tarix(il)");
        cols.AddFor(m => m.Description).DataType(GridColumnDataType.String).Caption("Təsviri");
    })
    .Configure<Obj12ExploitationRoad>
        ("ExploitationRoads", editMode: GridEditMode.Popup, keyField: "IdExploitationRoads")
        .OnEditingStart("EditingStarted").OnInitNewRow("NewRowAdding").OnRowDblClick("EditingStarted")

        )

            </div><!--end card-body-->
        </div><!--end card-->
    </div><!--end col-->
</div>
